import{j as r,z as d,F as y}from"./index-BDMXBHNM.js";import{r as o}from"./reactrouter-DPorlkB3.js";import{a as f,u as p}from"./function-BBXwl1Jc.js";import{R as b}from"./Repo-FiYEzRGL.js";const R=()=>{const[i,c]=o.useState([]),[n,u]=o.useState(!0),[l,m]=o.useState(null),a=async()=>{try{u(!0);const e=await f({page:1,limit:20});if(!e.success)throw new Error(e.error||"Failed to load starred repositories");c(e.data||[])}catch(e){console.error("Load starred repos error:",e),d.error(e.message||"Failed to load starred repositories")}finally{u(!1)}};o.useEffect(()=>{a()},[]);const h=async(e,t)=>{if(window.confirm(`Are you sure you want to unstar "${t}"?`))try{m(e),await d.promise(p(e),{loading:`Unstarring ${t}...`,success:`"${t}" unstarred successfully`,error:s=>`Failed to unstar: ${s.message||"Unknown error"}`},{duration:3e3,position:"top-right",success:{duration:4e3,icon:"⭐"}}),c(s=>s.filter(g=>(g.full_name||g.repoId)!==e))}catch(s){console.error("Unstar repo error:",s),s.handledByToast||(d.error("Failed to unstar repository. Please try again."),await a())}finally{m(null)}},x=()=>r.jsx(y,{position:"top-right",toastOptions:{duration:4e3,className:"text-sm font-medium",success:{duration:4e3,iconTheme:{primary:"#10B981",secondary:"white"}},error:{duration:5e3,iconTheme:{primary:"#EF4444",secondary:"white"}},loading:{duration:1/0,iconTheme:{primary:"#3B82F6",secondary:"white"}}}});return r.jsxs("div",{className:"p-4 max-w-6xl mx-auto",children:[r.jsx(x,{}),r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-white",children:"My Starred Repositories"}),r.jsx("button",{onClick:a,disabled:n,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:n?"Refreshing...":"Refresh"})]}),n&&i.length===0?r.jsx("div",{className:"flex justify-center items-center min-h-32",children:r.jsx("div",{className:"text-white text-lg",children:"Loading your starred repositories..."})}):i.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"text-gray-400 text-xl mb-4",children:"No starred repositories yet"}),r.jsx("button",{onClick:a,className:"px-6 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition-colors",children:"Check Again"})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-1 gap-4",children:i.map((e,t)=>r.jsxs("div",{className:"relative bg-gray-800 rounded-lg p-4 hover:bg-gray-750 transition-colors",children:[r.jsx(b,{repo:e,showSaveButton:!1}),r.jsx("button",{onClick:()=>h(e.full_name||e.repoId,e.name||"Repository"),disabled:l===(e.full_name||e.repoId),className:`absolute right-4 top-4 px-3 py-1 text-sm rounded transition-colors ${l===(e.full_name||e.repoId)?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-red-600 text-white hover:bg-red-700"}`,children:l===(e.full_name||e.repoId)?"Unstarring...":"Unstar"})]},`${e.full_name||e.repoId}-${t}`))})]})};export{R as default};
