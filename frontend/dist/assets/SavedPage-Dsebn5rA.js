import{j as s,z as d,F as v}from"./index-BDMXBHNM.js";import{r as a}from"./reactrouter-DPorlkB3.js";import{f,r as p}from"./function-BBXwl1Jc.js";import{R as y}from"./Repo-FiYEzRGL.js";const N=()=>{const[i,c]=a.useState([]),[n,m]=a.useState(!0),[l,u]=a.useState(null),t=async()=>{try{m(!0);const e=await f({page:1,limit:20});if(!e.success)throw new Error(e.error||"Failed to load saved repositories");c(e.data||[])}catch(e){console.error("Load saved repos error:",e),d.error(e.message||"Failed to load saved repositories")}finally{m(!1)}};a.useEffect(()=>{t()},[]);const h=async(e,o)=>{if(window.confirm(`Are you sure you want to remove "${o}" from saved repositories?`))try{u(e),await d.promise(p(e),{loading:`Removing ${o}...`,success:`"${o}" removed successfully`,error:r=>`Failed to remove: ${r.message||"Unknown error"}`},{duration:3e3,position:"top-right",success:{duration:4e3,icon:"🗑️"}}),c(r=>r.filter(g=>(g.full_name||g.repoId)!==e))}catch(r){console.error("Remove saved repo error:",r),r.handledByToast||(d.error("Failed to remove repository. Please try again."),await t())}finally{u(null)}},x=()=>s.jsx(v,{position:"top-right",toastOptions:{duration:4e3,className:"text-sm font-medium",success:{duration:4e3,iconTheme:{primary:"#10B981",secondary:"white"}},error:{duration:5e3,iconTheme:{primary:"#EF4444",secondary:"white"}},loading:{duration:1/0,iconTheme:{primary:"#3B82F6",secondary:"white"}}}});return s.jsxs("div",{className:"p-4 max-w-6xl mx-auto",children:[s.jsx(x,{}),s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-white",children:"My Saved Repositories"}),s.jsx("button",{onClick:t,disabled:n,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:n?"Refreshing...":"Refresh"})]}),n&&i.length===0?s.jsx("div",{className:"flex justify-center items-center min-h-32",children:s.jsx("div",{className:"text-white text-lg",children:"Loading your saved repositories..."})}):i.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-gray-400 text-xl mb-4",children:"No saved repositories yet"}),s.jsx("button",{onClick:t,className:"px-6 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition-colors",children:"Check Again"})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-1 gap-4",children:i.map((e,o)=>s.jsxs("div",{className:"relative bg-gray-800 rounded-lg p-4 hover:bg-gray-750 transition-colors",children:[s.jsx(y,{repo:e,showSaveButton:!1}),s.jsx("button",{onClick:()=>h(e.full_name||e.repoId,e.name||"Repository"),disabled:l===(e.full_name||e.repoId),className:`absolute right-4 top-4 px-3 py-1 text-sm rounded transition-colors ${l===(e.full_name||e.repoId)?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-red-600 text-white hover:bg-red-700"}`,children:l===(e.full_name||e.repoId)?"Removing...":"Remove"})]},`${e.full_name||e.repoId}-${o}`))})]})};export{N as default};
