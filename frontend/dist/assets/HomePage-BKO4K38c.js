import{j as e,u as y,S,z as p}from"./index-BDMXBHNM.js";import{r as d}from"./reactrouter-DPorlkB3.js";import{R as k}from"./Repos-U_mdCU-L.js";import{h as f}from"./function-BBXwl1Jc.js";import"./Repo-FiYEzRGL.js";const _=({userProfile:t})=>t?e.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/20",children:e.jsxs("div",{className:"text-center",children:[e.jsx("img",{src:t.avatar_url,alt:t.name,className:"w-24 h-24 rounded-full mx-auto mb-4 border-4 border-white/20"}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:t.name}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["@",t.login]}),e.jsx("p",{className:"text-white mb-4",children:t.bio}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:t.public_repos}),e.jsx("div",{className:"text-gray-300 text-sm",children:"Repos"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:t.followers}),e.jsx("div",{className:"text-gray-300 text-sm",children:"Followers"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:t.following}),e.jsx("div",{className:"text-gray-300 text-sm",children:"Following"})]})]}),e.jsx("div",{className:"mt-4",children:e.jsx("a",{href:t.html_url,target:"_blank",rel:"noopener noreferrer",className:"inline-block px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"View on GitHub"})})]})}):null,R=({onSearch:t})=>{const[i,c]=d.useState(""),r=l=>{l.preventDefault(),i.trim()&&t(l,i.trim())};return e.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/20 mb-6",children:e.jsxs("form",{onSubmit:r,className:"flex gap-4",children:[e.jsx("input",{type:"text",placeholder:"Enter GitHub username...",value:i,onChange:l=>c(l.target.value),className:"flex-1 px-4 py-3 bg-white/20 border border-white/30 rounded-lg text-white placeholder-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("button",{type:"submit",className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"Search"})]})})},C=({onSort:t,sortType:i})=>{const c=[{value:"recent",label:"Most Recent"},{value:"stars",label:"Most Stars"},{value:"forks",label:"Most Forks"}];return e.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4 border border-white/20 mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"text-white font-medium",children:"Sort by:"}),e.jsx("div",{className:"flex gap-2",children:c.map(r=>e.jsx("button",{onClick:()=>t(r.value),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${i===r.value?"bg-blue-600 text-white":"bg-white/20 text-white hover:bg-white/30"}`,children:r.label},r.value))})]})})},F=()=>{const{authUser:t}=y(),[i,c]=d.useState(null),[r,l]=d.useState([]),[x,u]=d.useState(!1),[g,m]=d.useState("recent"),h=async o=>{if(!o)return p.error("No username provided"),{userProfile:null,repos:[]};u(!0);try{const s=await fetch(`/api/users/profile/${o}`,{credentials:"include"}),{repos:n,userProfile:a}=await s.json(),b=[...n].sort((v,N)=>new Date(N.created_at)-new Date(v.created_at));return l(b),c(a),{userProfile:a,repos:b}}catch(s){return p.error((s==null?void 0:s.message)||"Failed to fetch user profile and repos"),{userProfile:null,repos:[]}}finally{u(!1)}};d.useEffect(()=>{t&&t.username?h(t.username):(c(null),l([]))},[t]);const j=async(o,s)=>{o.preventDefault(),l([]),c(null);const{userProfile:n,repos:a}=await h(s);c(n),l(a),m("recent")},w=o=>{const s=[...r];o==="recent"?s.sort((n,a)=>new Date(a.created_at)-new Date(n.created_at)):o==="stars"?s.sort((n,a)=>a.stargazers_count-n.stargazers_count):o==="forks"&&s.sort((n,a)=>a.forks_count-n.forks_count),m(o),l(s)};return e.jsx("div",{className:"m-4",children:t?e.jsxs(e.Fragment,{children:[e.jsx(R,{onSearch:j}),r.length>0&&e.jsx(C,{onSort:w,sortType:g}),e.jsxs("div",{className:"flex gap-4 flex-col lg:flex-row justify-center items-start",children:[i&&!x&&e.jsx(_,{userProfile:i}),!x&&e.jsx(k,{repos:r}),x&&e.jsx(S,{})]})]}):e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl font-bold text-white mb-8",children:"Welcome to GitHub Clone"}),e.jsx("p",{className:"text-gray-300 mb-8 max-w-md mx-auto",children:"Explore GitHub repositories, track your progress, and discover amazing projects."}),e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsx("button",{onClick:f,className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium",children:"Login with GitHub"}),e.jsx("button",{onClick:f,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"Sign Up"})]})]})})})};export{F as default};
